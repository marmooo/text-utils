const splitRegex=new RegExp("[^a-zA-Z0-9']+","g"),dictUrl="words-en.txt";let maxWordLen=0;const wordCost={};let maxCost=9e999;export class WordsNinja{loadDictionary(a=dictUrl){return fetch(a).then(a=>a.text()).then(b=>{const a=b.split("\n"),c=Math.log(a.length);a.forEach((a,b)=>{wordCost[a]=Math.log((b+1)*c),a.length>maxWordLen&&(maxWordLen=a.length),wordCost[a]<maxCost&&(maxCost=wordCost[a])})})}splitSentence(a,{camelCaseSplitter:b,capitalizeFirstLetter:c,joinWords:d}={}){const e=[];return b=b||!1,c=c||!1,d=d||!1,b&&(a=this.camelCaseSplitter(a)),a.split(splitRegex).forEach(a=>{this.splitWords(a).forEach(a=>{a=c?this.capitalizeFirstLetter(a):a,e.push(a)})}),d?e.join(" "):e}addWords(a){if(Array.isArray(a))for(const b of a)this.addWords(b);else{const b=a.toLocaleLowerCase();wordCost[b]=maxCost,b.length>maxWordLen&&(maxWordLen=b.length)}}splitWords(b){const d=[0];function e(a){const e=d.slice(Math.max(0,a-maxWordLen),a).reverse();let c=[Number.MAX_SAFE_INTEGER,0];return e.forEach((f,e)=>{let d;wordCost[b.substring(a-e-1,a).toLowerCase()]?d=f+wordCost[b.substring(a-e-1,a).toLowerCase()]:d=Number.MAX_SAFE_INTEGER,d<c[0]&&(c=[d,e+1])}),c}for(let a=1;a<b.length+1;a++)d.push(e(a)[0]);const c=[];let a=b.length;while(a>0){const d=e(a)[1];let f=!0;b.slice(a-d,a)!="'"&&c.length>0&&(c[-1]=="'s"||Number.isInteger(b[a-1])&&Number.isInteger(c[-1][0]))&&(c[-1]=b.slice(a-d,a)+c[-1],f=!1),f&&c.push(b.slice(a-d,a)),a-=d}return c.reverse()}camelCaseSplitter(b){const c=b||"",d=c.trim(),e=d.split(" "),a=[];return e.forEach(b=>{if(b!=""){const c=b.split(/(?=[A-Z])/).join(" ");a.push(c)}}),a.join(" ")}capitalizeFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}}