function loadConfig(){localStorage.getItem("darkMode")==1&&document.documentElement.setAttribute("data-bs-theme","dark")}function toggleDarkMode(){localStorage.getItem("darkMode")==1?(localStorage.setItem("darkMode",0),document.documentElement.setAttribute("data-bs-theme","light")):(localStorage.setItem("darkMode",1),document.documentElement.setAttribute("data-bs-theme","dark"))}function countTextLength(a){if(Intl.Segmenter){const b=new Intl.Segmenter("ja",{granularity:"grapheme"}),c=b.segment(a);return[...c].length}return[...a].length}function html10Decode(a){function b(b,a){return String.fromCodePoint(a)}return a.replace(/&#([0-9]+);/g,b)}function html10Encode(a){return[...a].map(a=>{const b=a.codePointAt(0);return`&#${b};`}).join("")}function html16Decode(a){function b(b,a){return String.fromCodePoint(parseInt(a,16))}return a.replace(/&#[xX]([0-9a-fA-F]+);/g,b)}function html16Encode(a){return[...a].map(a=>{const b=a.codePointAt(0).toString(16);return`&#x${b};`}).join("")}function unicodePointEncode(a){return[...a].map(a=>{const b=a.codePointAt(0).toString(16);return`\\u\{${b}\}`}).join("")}function unicodePointDecode(a){function b(b,a){return String.fromCodePoint(parseInt(a,16))}return a.replace(/\\u\{([0-9a-fA-F]+)\}/g,b)}function unicodeUnitEncode(a){return a.split("").map(a=>{const b=a.codePointAt(0).toString(16);return`\\u${b}`}).join("")}function unicodeUnitDecode(a){function b(b,a){return String.fromCodePoint(parseInt(a,16))}return a.replace(/\\u([0-9a-fA-F]+)/g,b)}function htmlEscapeEncode(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlEscapeDecode(a){return a.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function sortLines(a){return a.split("\n").sort().join("\n")}function uniqLines(a){return[...new Set(a.split("\n"))].join("\n")}function shuffle(a){for(let b=a.length;1<b;b--){const c=Math.floor(Math.random()*b);[a[c],a[b-1]]=[a[b-1],a[c]]}return a}function shuffleLines(a){return shuffle(a.split("\n")).join("\n")}function camelToPascal(a){return a.replace(/[a-zA-Z]+/g,a=>a[0].toUpperCase()+a.slice(1))}function pascalToCamel(a){return a.replace(/[a-zA-Z]+/g,a=>a[0].toLowerCase()+a.slice(1))}function camelToSnake(a){return a.replace(/[A-Z]/g,a=>`_${a.toLowerCase()}`)}function snakeToCamel(a){return a.replace(/_./g,a=>a.charAt(1).toUpperCase())}function flatToPascal(){import("/text-utils/wordsninja.js").then(b=>{const a=new b.WordsNinja;a.loadDictionary("/text-utils/words-en.txt").then(()=>{const b=a.splitSentence(fromText.value);toText.value=b.join("_"),toText.onchange()})})}function pascalToFlat(a){return a.replace(/_/g,"")}function toSnakeNumber(a){return a.replace(/([a-z])([0-9]+)/g,"$1_$2")}function toNoSnakeNumber(a){return a.replace(/_([0-9]+)/g,"$1")}function kanaToHira(a){return a.replace(/[\u30a1-\u30f6]/g,a=>{const b=a.charCodeAt(0)-96;return String.fromCharCode(b)})}function hiraToKana(a){return a.replace(/[\u3041-\u3096]/g,a=>{const b=a.charCodeAt(0)+96;return String.fromCharCode(b)})}function hiraToRoma(){import("/text-utils/hiraroma.js").then(a=>{toText.value=a.hiraToRoma(fromText.value),toText.onchange()})}function kanaToRoma(){import("/text-utils/hiraroma.js").then(a=>{function b(b){const c=kanaToHira(b);return a.hiraToRoma(c)}const c=fromText.value.replace(/[ァ-ヴー]+/g,b);toText.value=c,toText.onchange()})}function romaToHira(){import("/text-utils/hiraroma.js").then(a=>{toText.value=a.romaToHira(fromText.value),toText.onchange()})}function romaToKana(){import("/text-utils/hiraroma.js").then(a=>{const b=a.romaToHira(fromText.value);toText.value=hiraToKana(b),toText.onchange()})}function zenRomaToHanRoma(a){return a.replace(/[Ａ-Ｚａ-ｚ０-９]/g,a=>String.fromCharCode(a.charCodeAt(0)-65248))}function hanRomaToZenRoma(a){return a.replace(/[A-Za-z0-9]/g,a=>String.fromCharCode(a.charCodeAt(0)+65248))}function hanSmbolToZenSymbol(a){return a.replace(/[!-\/:-@\[-\{-~]/g,a=>String.fromCharCode(a.charCodeAt(0)+65248))}function zenSymbolToHanSymbol(a){return a.replace(/[！＂＃＄％＆＇（）＊＋，－．／：；＜＝＞？＠［＼］＾＿｀｛|}～]/g,a=>String.fromCharCode(a.charCodeAt(0)-65248))}function zenKanaToHanKana(b){const a={"ガ":"ｶﾞ","ギ":"ｷﾞ","グ":"ｸﾞ","ゲ":"ｹﾞ","ゴ":"ｺﾞ","ザ":"ｻﾞ","ジ":"ｼﾞ","ズ":"ｽﾞ","ゼ":"ｾﾞ","ゾ":"ｿﾞ","ダ":"ﾀﾞ","ヂ":"ﾁﾞ","ヅ":"ﾂﾞ","デ":"ﾃﾞ","ド":"ﾄﾞ","バ":"ﾊﾞ","ビ":"ﾋﾞ","ブ":"ﾌﾞ","ベ":"ﾍﾞ","ボ":"ﾎﾞ","パ":"ﾊﾟ","ピ":"ﾋﾟ","プ":"ﾌﾟ","ペ":"ﾍﾟ","ポ":"ﾎﾟ","ヴ":"ｳﾞ","ヷ":"ﾜﾞ","ヺ":"ｦﾞ","ア":"ｱ","イ":"ｲ","ウ":"ｳ","エ":"ｴ","オ":"ｵ","カ":"ｶ","キ":"ｷ","ク":"ｸ","ケ":"ｹ","コ":"ｺ","サ":"ｻ","シ":"ｼ","ス":"ｽ","セ":"ｾ","ソ":"ｿ","タ":"ﾀ","チ":"ﾁ","ツ":"ﾂ","テ":"ﾃ","ト":"ﾄ","ナ":"ﾅ","ニ":"ﾆ","ヌ":"ﾇ","ネ":"ﾈ","ノ":"ﾉ","ハ":"ﾊ","ヒ":"ﾋ","フ":"ﾌ","ヘ":"ﾍ","ホ":"ﾎ","マ":"ﾏ","ミ":"ﾐ","ム":"ﾑ","メ":"ﾒ","モ":"ﾓ","ヤ":"ﾔ","ユ":"ﾕ","ヨ":"ﾖ","ラ":"ﾗ","リ":"ﾘ","ル":"ﾙ","レ":"ﾚ","ロ":"ﾛ","ワ":"ﾜ","ヲ":"ｦ","ン":"ﾝ","ァ":"ｧ","ィ":"ｨ","ゥ":"ｩ","ェ":"ｪ","ォ":"ｫ","ッ":"ｯ","ャ":"ｬ","ュ":"ｭ","ョ":"ｮ","。":"｡","、":"､","ー":"ｰ","「":"｢","」":"｣","・":"･"},c=new RegExp("("+Object.keys(a).join("|")+")","g");return b.replace(c,b=>a[b]).replace(/゛/g,"ﾞ").replace(/゜/g,"ﾟ")}function hanKanaToZenKana(b){const a={"ｶﾞ":"ガ","ｷﾞ":"ギ","ｸﾞ":"グ","ｹﾞ":"ゲ","ｺﾞ":"ゴ","ｻﾞ":"ザ","ｼﾞ":"ジ","ｽﾞ":"ズ","ｾﾞ":"ゼ","ｿﾞ":"ゾ","ﾀﾞ":"ダ","ﾁﾞ":"ヂ","ﾂﾞ":"ヅ","ﾃﾞ":"デ","ﾄﾞ":"ド","ﾊﾞ":"バ","ﾋﾞ":"ビ","ﾌﾞ":"ブ","ﾍﾞ":"ベ","ﾎﾞ":"ボ","ﾊﾟ":"パ","ﾋﾟ":"ピ","ﾌﾟ":"プ","ﾍﾟ":"ペ","ﾎﾟ":"ポ","ｳﾞ":"ヴ","ﾜﾞ":"ヷ","ｦﾞ":"ヺ","ｱ":"ア","ｲ":"イ","ｳ":"ウ","ｴ":"エ","ｵ":"オ","ｶ":"カ","ｷ":"キ","ｸ":"ク","ｹ":"ケ","ｺ":"コ","ｻ":"サ","ｼ":"シ","ｽ":"ス","ｾ":"セ","ｿ":"ソ","ﾀ":"タ","ﾁ":"チ","ﾂ":"ツ","ﾃ":"テ","ﾄ":"ト","ﾅ":"ナ","ﾆ":"ニ","ﾇ":"ヌ","ﾈ":"ネ","ﾉ":"ノ","ﾊ":"ハ","ﾋ":"ヒ","ﾌ":"フ","ﾍ":"ヘ","ﾎ":"ホ","ﾏ":"マ","ﾐ":"ミ","ﾑ":"ム","ﾒ":"メ","ﾓ":"モ","ﾔ":"ヤ","ﾕ":"ユ","ﾖ":"ヨ","ﾗ":"ラ","ﾘ":"リ","ﾙ":"ル","ﾚ":"レ","ﾛ":"ロ","ﾜ":"ワ","ｦ":"ヲ","ﾝ":"ン","ｧ":"ァ","ｨ":"ィ","ｩ":"ゥ","ｪ":"ェ","ｫ":"ォ","ｯ":"ッ","ｬ":"ャ","ｭ":"ュ","ｮ":"ョ","｡":"。","､":"、","ｰ":"ー","｢":"「","｣":"」","･":"・"},c=new RegExp("("+Object.keys(a).join("|")+")","g");return b.replace(c,b=>a[b]).replace(/ﾞ/g,"゛").replace(/ﾟ/g,"゜")}function numToKan(){const a="https://cdn.jsdelivr.net/npm/@geolonia/japanese-numeral@0.1.16/+esm";import(a).then(a=>{toText.value=a.number2kanji(fromText.value),toText.onchange()})}function kanToNum(){const a="https://cdn.jsdelivr.net/npm/@geolonia/japanese-numeral@0.1.16/+esm";import(a).then(a=>{toText.value=a.kanji2number(fromText.value),toText.onchange()})}function stringReplace(){const a=document.getElementById("stringReplaceFrom").value,b=document.getElementById("stringReplaceTo").value;toText.value=fromText.value.replaceAll(a,b),toText.onchange()}function regexpReplace(){const a=document.getElementById("regexpReplaceFrom").value,b=document.getElementById("regexpReplaceTo").value,c=new RegExp(a,"mg");toText.value=fromText.value.replaceAll(c,b),toText.onchange()}function numbering(){let a=parseInt(document.getElementById("numberingStart").value);a||(a=0);const b=document.getElementById("numberingFrom").value,c=document.getElementById("numberingTo").value,d=new RegExp(b,"mg"),e="https://cdn.jsdelivr.net/npm/sprintf-js@1.1.2/src/sprintf.min.js";import(e).then(()=>{function b(){const b=sprintf(c,a);return a+=1,b}toText.value=fromText.value.replaceAll(d,b),toText.onchange()})}function extractColumns(){const a=document.getElementById("extractColumnsSeparator").value,b=new RegExp(a,"g"),c=document.getElementById("extractColumnsTarget").value.split(/\s*,\s*/).map(a=>parseInt(a)-1),d=fromText.value.split("\n").map(d=>{const e=d.split(b),f=e.filter((b,a)=>c.includes(a));return f.join(a)}).join("\n");toText.value=d,toText.onchange()}function extractUrls(){function c(a){if(a){const a="https?://[A-Za-z0-9\u3000-\u30FE\u4E00-\u9FA0\uFF01-\uFFE3!#\\$&'\\(\\)\\*\\+,/:;=\\?@\\[\\]\\._~-]+";return new RegExp(a,"g")}const b="https?://[A-Za-z0-9!#\\$&'\\(\\)\\*\\+,/:;=\\?@\\[\\]\\._~-]+";return new RegExp(b,"g")}const d=document.getElementById("extractUrlsJapanese").checked,a=c(d),b=document.getElementById("extractUrlsExtensions").value;if(b==""){const b=[...fromText.value.matchAll(a)].map(a=>a[0]).join("\n");toText.value=b}else{const c=b.split(/\s*,\s*/).map(a=>"."+a).join("|")+"$",d=new RegExp(c),e=[...fromText.value.matchAll(a)].map(a=>a[0]).filter(a=>d.test(a)).join("\n");toText.value=e}toText.onchange()}function increaseText(){const a=document.getElementById("editor"),b=parseInt(getComputedStyle(a).fontSize)+1;a.style.fontSize=b+"px"}function decreaseText(){const a=document.getElementById("editor"),b=parseInt(getComputedStyle(a).fontSize)-1;a.style.fontSize=b+"px"}function runCode(){const a=document.getElementById("editor").value;return Function(a)()}function sleep(a){return new Promise(b=>setTimeout(b,a))}function addClipboardButtons(){[...document.getElementsByClassName("clipboard")].forEach(a=>{const b=a.parentNode;b.addEventListener("mouseover",()=>{a.classList.remove("invisible")}),b.addEventListener("mouseleave",()=>{a.classList.add("invisible")});const d=a.nextElementSibling,c=a.firstElementChild;c.onclick=async()=>{const[a,b]=c.children;await navigator.clipboard.writeText(d.value),a.classList.add("d-none"),b.classList.remove("d-none"),await sleep(2e3),a.classList.remove("d-none"),b.classList.add("d-none")}})}loadConfig(),addClipboardButtons(),document.getElementById("toggleDarkMode").onclick=toggleDarkMode;const fromText=document.getElementById("fromText"),toText=document.getElementById("toText"),procReverse=document.getElementById("procReverse");fromText.onchange=()=>{const a=fromText.value,b=countTextLength(a),c=(a.match(/\s/g)||[]).length;document.getElementById("fromLength").value=b,document.getElementById("fromCount").value=b-c,document.getElementById("fromLinage").value=(a.match(/\n/g)||[]).length},toText.onchange=()=>{const a=toText.value,b=countTextLength(a),c=(a.match(/\s/g)||[]).length;document.getElementById("toLength").value=b,document.getElementById("toCount").value=b-c,document.getElementById("toLinage").value=(a.match(/\n/g)||[]).length},procReverse.onchange=()=>{const a=document.getElementById("procReverseLabel"),c=document.getElementById("commandList"),b=[...c.getElementsByTagName("button")];procReverse.checked?(a.textContent=a.textContent="出力 ← 入力",b.forEach(a=>{a.textContent=a.textContent.replace("→","←")})):(a.textContent=a.textContent="入力 → 出力",b.forEach(a=>{a.textContent=a.textContent.replace("←","→")}))},document.getElementById("htmlEscape").onclick=()=>{procReverse.checked?toText.value=htmlEscapeDecode(fromText.value):toText.value=htmlEscapeEncode(fromText.value),toText.onchange()},document.getElementById("html10").onclick=()=>{procReverse.checked?toText.value=html10Decode(fromText.value):toText.value=html10Encode(fromText.value),toText.onchange()},document.getElementById("html16").onclick=()=>{procReverse.checked?toText.value=html16Decode(fromText.value):toText.value=html16Encode(fromText.value),toText.onchange()},document.getElementById("unicodePoint").onclick=()=>{procReverse.checked?toText.value=unicodePointDecode(fromText.value):toText.value=unicodePointEncode(fromText.value),toText.onchange()},document.getElementById("unicodeUnit").onclick=()=>{procReverse.checked?toText.value=unicodeUnitDecode(fromText.value):toText.value=unicodeUnitEncode(fromText.value),toText.onchange()},document.getElementById("uri").onclick=()=>{procReverse.checked?toText.value=decodeURI(fromText.value):toText.value=encodeURI(fromText.value),toText.onchange()},document.getElementById("uriComponent").onclick=()=>{procReverse.checked?toText.value=decodeURIComponent(fromText.value):toText.value=encodeURIComponent(fromText.value),toText.onchange()},document.getElementById("base64").onclick=()=>{procReverse.checked?toText.value=atob(fromText.value):toText.value=btoa(fromText.value),toText.onchange()},document.getElementById("sortLines").onclick=()=>{toText.value=sortLines(fromText.value),toText.onchange()},document.getElementById("uniqLines").onclick=()=>{toText.value=uniqLines(fromText.value),toText.onchange()},document.getElementById("shuffleLines").onclick=()=>{toText.value=shuffleLines(fromText.value),toText.onchange()},document.getElementById("camelToPascal").onclick=()=>{procReverse.checked?toText.value=pascalToCamel(fromText.value):toText.value=camelToPascal(fromText.value),toText.onchange()},document.getElementById("camelToSnake").onclick=()=>{procReverse.checked?toText.value=snakeToCamel(fromText.value):toText.value=camelToSnake(fromText.value),toText.onchange()},document.getElementById("flatToPascal").onclick=()=>{procReverse.checked?pascalToFlat(fromText.value):flatToPascal(fromText.value),toText.onchange()},document.getElementById("snakeNumber").onclick=()=>{procReverse.checked?toText.value=toNoSnakeNumber(fromText.value):toText.value=toSnakeNumber(fromText.value),toText.onchange()},document.getElementById("upperLower").onclick=()=>{procReverse.checked?toText.value=fromText.value.toUpperCase():toText.value=fromText.value.toLowerCase(),toText.onchange()},document.getElementById("hiraKana").onclick=()=>{procReverse.checked?toText.value=kanaToHira(fromText.value):toText.value=hiraToKana(fromText.value),toText.onchange()},document.getElementById("hiraRoma").onclick=()=>{procReverse.checked?romaToHira():hiraToRoma(),toText.onchange()},document.getElementById("kanaRoma").onclick=()=>{procReverse.checked?romaToKana():kanaToRoma(),toText.onchange()},document.getElementById("zenHanRoma").onclick=()=>{procReverse.checked?toText.value=hanRomaToZenRoma(fromText.value):toText.value=zenRomaToHanRoma(fromText.value),toText.onchange()},document.getElementById("zenHanSymbol").onclick=()=>{procReverse.checked?toText.value=hanSmbolToZenSymbol(fromText.value):toText.value=zenSymbolToHanSymbol(fromText.value),toText.onchange()},document.getElementById("zenHanKana").onclick=()=>{procReverse.checked?toText.value=hanKanaToZenKana(fromText.value):toText.value=zenKanaToHanKana(fromText.value),toText.onchange()},document.getElementById("kanToNum").onclick=()=>{procReverse.checked?numToKan(fromText.value):kanToNum(fromText.value),toText.onchange()},document.getElementById("zenHanAll").onclick=()=>{let a=fromText.value;a=zenRomaToHanRoma(a),a=zenSymbolToHanSymbol(a),a=hanKanaToZenKana(a),toText.value=a,toText.onchange()},document.getElementById("stringReplace").onclick=stringReplace,document.getElementById("regexpReplace").onclick=regexpReplace,document.getElementById("numbering").onclick=numbering,document.getElementById("extractColumns").onclick=extractColumns,document.getElementById("extractUrls").onclick=extractUrls,document.getElementById("increaseText").onclick=increaseText,document.getElementById("decreaseText").onclick=decreaseText,document.getElementById("runCode").onclick=runCode